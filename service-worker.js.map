{"version":3,"sources":["webpack://moods/./public/service-worker.js"],"names":["CACHE_NAME_BASE","pathItems","self","__WB_MANIFEST","version","calcVersion","CACHE_NAME","str","map","item","url","revision","join","length","String","hashCode","Date","getTime","hash","i","len","chr","charCodeAt","addEventListener","event","files","filter","path","waitUntil","caches","open","then","cache","addAll","skipWaiting"],"mappings":"YAAA,MAAM,EAAkB,UAClB,EAAY,ibAAK,cAEjB,EAAU,EAAY,GACtB,EAAc,GAAE,KAAmB,IAmBzC,SAAS,EAAa,GACpB,MAAM,EAAM,EACT,KAAI,GAAS,GAAE,EAAK,QAAQ,EAAK,UAAY,OAC7C,KAAK,MACR,OAAO,EAAU,OAAS,EACtB,OAAO,EAAS,IAChB,QAAO,IAAI,MAAO,UACxB,CAEA,SAAS,EAAU,GACjB,IAAI,EAAO,EACX,IAAK,IAAI,EAAI,EAAG,EAAM,EAAI,OAAQ,EAAI,EAAK,GAAK,EAAG,CACjD,MAAM,EAAM,EAAI,WAAW,GAC3B,GAAQ,GAAQ,GAAK,EAAO,EAC5B,GAAQ,CAEV,CACA,OAAO,CACT,CAnCA,KAAK,iBAAiB,WAAW,SAAU,GACzC,IAAI,EAAQ,EAAU,KAAI,GAAQ,EAAK,MAEvC,EAAQ,EAAM,QAAO,GAAiB,eAAT,IAE7B,EAAM,UACJ,OACG,KAAK,GACL,MAAK,GACG,EAAM,OAAO,KAErB,MAAK,IACG,KAAK,gBAGpB","file":"service-worker.js","sourceRoot":"","sourcesContent":["const CACHE_NAME_BASE = 'cache-v'\r\nconst pathItems = self.__WB_MANIFEST\r\n\r\nconst version = calcVersion(pathItems)\r\nconst CACHE_NAME = `${CACHE_NAME_BASE}-${version}`\r\n\r\nself.addEventListener('install', function (event) {\r\n  let files = pathItems.map(item => item.url)\r\n\r\n  files = files.filter(path => path !== 'index.html')\r\n\r\n  event.waitUntil(\r\n    caches\r\n      .open(CACHE_NAME)\r\n      .then(cache => {\r\n        return cache.addAll(files)\r\n      })\r\n      .then(() => {\r\n        return self.skipWaiting()\r\n      })\r\n  )\r\n})\r\n\r\nfunction calcVersion (pathItems) {\r\n  const str = pathItems\r\n    .map(item => `${item.url}::${item.revision || ''}`)\r\n    .join('::')\r\n  return pathItems.length > 0\r\n    ? String(hashCode(str))\r\n    : String(new Date().getTime())\r\n}\r\n\r\nfunction hashCode (str) {\r\n  let hash = 0\r\n  for (let i = 0, len = str.length; i < len; i += 1) {\r\n    const chr = str.charCodeAt(i)\r\n    hash = (hash << 5) - hash + chr // eslint-disable-line no-bitwise\r\n    hash |= 0 // eslint-disable-line no-bitwise\r\n    // Convert to 32bit integer\r\n  }\r\n  return hash\r\n}\r\n"]}